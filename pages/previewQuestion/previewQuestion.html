<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title></title>
    <link rel="icon" type="image/x-icon" href="data:image/png;base64,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">
    <link rel="stylesheet" type="text/css" href="https://layui.hcwl520.com.cn/layui/css/layui.css?v=201801090202" />
    <style>
        *{
            box-sizing: border-box;
        }
        body{
            margin: 0;
            background: #eee;
        }
        .content{
            width: 1024px;
            min-height: 100vh;
            background: #fff;
            margin: auto;
            padding: 20px 30px;
        }
        .content h2{
            text-align: center;
            margin-bottom: 20px;
        }

        .content .layui-form-item {
            display: flex;
            padding: 15px 15px 15px 0;
        }

        .content .layui-form-item>.layui-form-label {
            width: 35px;
            padding-right: 0px;
            text-align: left;
        }

        .content .layui-form-item>div {
            width: 85%;
        }

        .content .layui-form-item>button{
            display: none;
            margin: 8px 0 0 20px;
        }

        .content .layui-form-item:hover button{
            display: block;
        }

        .content .layui-form-item .options {
            padding: 5px 0;
            display: flex;
            align-items: center;
        }

        .content .layui-form-item .options input[type='text'] {
            width: 45%;
            margin-right: 15px;
        }

        .content .layui-form-item .options input[type='text']:first-child{
            width: calc(45% + 28px);
        }

        .content .layui-form-item input {
            border: none;
        }

        .content .layui-form-item input.inputBorder {
            border: none;
            border-bottom: 1px solid #ccc;
            margin-left: 10px;
        }

        .content .layui-form-item .layui-form-radio {
            display: table;
            margin: 0 0 0 10px;
            padding-right: 0;
        }

        .content .layui-form-item .layui-form-checkbox {
            display: table;
            margin-left: 12px;
            padding-right: 0;
        }

        .content .layui-form-item .layui-form-checkbox[lay-skin=primary]{
            margin-top: 2px;
        }

        .content>div:last-child {
            text-align: center;
        }

        .content>div:last-child button{
            width: 80px;
        }
    </style>
</head>

<body>
    <form id="content" class="layui-form content">
        <h2></h2>
        <div>
            <button type="submit" class="layui-btn" lay-submit lay-filter="saveForm">提交</button>
        </div>
    </form>

    <script src="https://layui.hcwl520.com.cn/jquery/jquery-3.3.1.min.js?v=201804251754"></script>
    <script src="https://layui.hcwl520.com.cn/layui/layui.js?v=201801090202"></script>
    <script>
        $(function () {
            let location_href = window.location.href;   // 当前页面url
            let id = location_href.split('?id=')[1];    // url中包含的问卷 id
            console.log(location_href, id);

            /*
                获取 id 对应的问卷信息：标题，题目
            */
            $('head title').text('设置页面标题，同问卷标题');   // 设置页面标题，同问卷标题
            $('body h2').text('设置页面标题，同问卷标题');   // 设置标题，同问卷标题
        })

        layui.use(['form'], function () {
            let form = layui.form;

            renderQuestion([{
                question_type_id: 1,
                question_content: 'radio_1案说法违法',
                option_content: '士大夫但是发顺丰#花木成畦手自栽工#3上的发放#啊打发打发'
            }, {
                question_type_id: 2,
                question_content: 'checkbox_2花木成畦手自栽苯肼a',
                option_content: '11#22#33#44'
            }, {
                question_type_id: 3,
                question_content: 'input_3',
                option_content: null
            }]);

            /**
             * 获取问卷数据后渲染页面
             *
             * @param {*} question 问卷题目选项
             */
            function renderQuestion(question) {

                let html = '', subjectCount = 0;
                question.forEach(item => {
                    console.log(item);
                    switch (item.question_type_id) {
                        case 1:
                            html += `<div class="layui-form-item">
                                        <label class="layui-form-label">${++subjectCount}.</label>
                                        <div class="item">
                                            <input type="text" class="layui-input" value="${item.question_content}">`;
                            let r_options = item.option_content.split('#');
                            r_options.forEach((option, index) => {
                                html += `   <div class="options">
                                                <input type="radio" name="${subjectCount}" value="${index + 1}" title="${option}">
                                            </div>`
                            });
                            html += `</div></div>`;
                            break;
                        case 2:
                            html += `<div class="layui-form-item">
                                        <label class="layui-form-label">${++subjectCount}.</label>
                                        <div class="item">
                                            <input type="text" class="layui-input" value="${item.question_content}">`;
                            let c_options = item.option_content.split('#');
                            c_options.forEach((option, index) => {
                                html += `   <div class="options">
                                                <input type="checkbox" lay-skin="primary" name="${subjectCount}" value="${index + 1}" title="${option}">
                                            </div>`
                            });
                            html += `</div></div>`;
                            break;
                        case 3:
                            html += `<div class="layui-form-item">
                                        <label class="layui-form-label">${++subjectCount}.</label>
                                        <div class="item">
                                            <input type="text" class="layui-input" value="${item.question_content}">
                                            <div class="options">
                                                <input type="text" name="${subjectCount}" class="layui-input inputBorder">
                                            </div>
                                        </div>
                                    </div>`;
                            break;
                    }
                });
                $('#content h2').after(html);
                form.render();
            }

            // 提交问卷填写内容
            form.on('submit(saveForm)', function (data) {
                console.log(data.field);

                // 提示填写者，并关闭页面
                layer.msg('您已完成本次问卷，感谢您的帮助与支持！', { icon: 6, time: 2000 }, function () {
                    // window.close();
                })
                return false;
            })
        })


    </script>
</body>

</html>